{% extends "layout.html.twig" %}
{% block content %}
	<div id="content">
		<div class="cbox_fws">
			<h3>Lista de tareas</h3>

			{% set elementsPerPage = 5 %}
			{% set lowerLimit = (page - 1) * elementsPerPage + 1 %}
			{% set upperLimit = page * elementsPerPage %}

			<table border='1'>
				{% for task in data|sort((a, b) => a.fecha_vencimiento <=> b.fecha_vencimiento) %}
					{% if loop.index >= lowerLimit and loop.index <= upperLimit %}					
					<tr>
						<td>
							<a href='/detail/{{task.id}}'>{{task.titulo}}</a>
						</td>
						<td>{{task.fecha_vencimiento|date("d/m/Y")}}</td>
					</tr>
					{% endif %}
				{% endfor %}
			</table>
			{% set totalPages = ((data|length) / elementsPerPage) | round(0,'ceil')  %}

			{% if page > 1 %}
			<a href="/list/1">&lt;&lt;</a>
			<a href="/list/{{ page - 1 }}">&lt;</a>			
			{% endif %}


			{% for pageButton in 1.. totalPages %}
				{% if pageButton == page %}
					<span style=" border: 1px solid red; padding: 0.3em">{{ pageButton }}</span>
				{% else %}
				<a href="/list/{{ pageButton }}">{{ pageButton }}   </a>
				{% endif %}				
			{% endfor %}

		
			{% if pages < totalPages %}
			<a href="/list/{{ page + 1 }}">&gt;</a>
			<a href="/list/{{ totalPages }}">&gt;&gt;</a>
			{% endif %}			
			

		</div>

		<div class="cbox_last">
			<h3>Photo Gallery</h3>
			<ul class="photo_gallery">
				<li>
					<a href="#"><img src="/images/templatemo_image_01.jpg" alt="Image 1" class="image_frame"/></a>
				</li>
				<li>
					<a href="#"><img src="/images/templatemo_image_02.jpg" alt="Image 2" class="image_frame"/></a>
				</li>
				<li class="rmp">
					<a href="#"><img src="/images/templatemo_image_03.jpg" alt="Image 3" class="image_frame"/></a>
				</li>
			</ul>
			<div class="cleaner"></div>
			<p>
				<a href="#" class="more float_r">
					<span>&gt;&gt;</span>
					View All</a>
			</p>

		</div>

	</div>
{% endblock %}
